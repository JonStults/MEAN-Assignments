var fs = require('fs');
// var path = require('path');
// fs.readFile('.'+path.dirname(request.url)+'/'+path.basename(request.url)
module.exports = function (req, res) {

	var request = req.url;
	var file, encode, type;
	console.log('requested URL: ', request);

	switch (request) {
		case '/':
			file = './views/index.html';
			encode = 'utf8';
			type = 'text/html';
			break;
		default:
			switch (request.slice(request.length-2, request.length)) {
				case 'ss': // c'ss'
					file = '.' + request;
					encode = 'utf8';
					type = 'text/css';
					break;
				case 'js': // 'js'
					file = '.' + request;
					encode = 'utf8';
					type = 'text/javascript';
					break;
				case 'ng': // p'ng'
					file = '.' + request;
					encode = '';
					type = 'image/png';
					break;
				case 'pg': // j'pg'
					file = '.' + request;
					encode = '';
					type = 'image/jpg';
					break;
				default:
					file = 'null';
			}
	}

	console.log('file ', file);
	console.log('slice', request.slice(request.length-2, request.length));
	if (file !== 'null') {
		fs.readFile(file, encode, function(errors, contents) {
			if (errors) { console.log(errors) }
			res.writeHead(200, { 'Content-Type': type });
			res.write(contents);
			res.end();
		});
	}
	else {
		res.writeHead(404);
		res.end('File not found!!!');
	}

}
